{
  "path": "/home/user/git/github/towc/aidef/compiler/aid_parser/leaf.gen.aid.leaf.json",
  "dir": "/home/user/git/github/towc/aidef/compiler/aid_parser",
  "prompt": "\n    Create an AIDef file parser.\n    It should export the following functions and types:\n\n    - `parse(content: string): AidDocument`\n    - `AidDocument`: Represents the parsed .aid file content.\n    - `AidNode`: Union type of `AidModule`, `AidParam`, `AidInclude`, `AidProse`, `AidComment`.\n    - `AidModule = { type: 'module', name: string, content: AidNode[] }`\n    - `AidParam = { type: 'param', name: string, value: string }`\n    - `AidInclude = { type: 'include', path: string, originalLine: string }`\n    - `AidProse = { type: 'prose', content: string }`\n    - `AidComment = { type: 'comment', content: string }`\n\n    The parser must handle the following syntax:\n\n    1.  **`include <path>;`**:\n        -   Parse the path.\n        -   Store the original line for later processing (e.g., recursive inclusion).\n        -   If encountered in a `.gen.aid` context (which the parser itself won't know, but the caller will use this info), it should be ignored and marked as a compile-time warning.\n        -   The parser should *not* resolve includes; it should just represent them in the AST.\n\n    2.  **`<module> { <instructions> }` blocks**:\n        -   Parse the module name.\n        -   Recursively parse the instructions within the curly braces into an array of `AidNode`.\n\n    3.  **`<param>=<value>;`**:\n        -   Parse the parameter name and its value.\n        -   Treat specific parameters like `type=leaf;`, `path=some_path;`, `files=file1,file2;` as special, but represent all parameters generically.\n\n    4.  **`#` for comments**:\n        -   Everything after `#` on a line is ignored, unless within a code block (which is not explicitly defined in this spec, so assume no code blocks for now) or when escaped (e.g., `\\#`).\n        -   Comments should be represented in the AST as `AidComment`.\n\n    5.  **Prose**: Any text not matching the above syntax should be treated as `AidProse`.\n\n    The parser should be robust and handle various whitespace and line endings.\n    ",
  "files": [
    "parser.ts",
    "aid_types.ts"
  ],
  "commands": []
}