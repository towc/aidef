{
  "path": "/home/user/git/github/towc/aidef/gen_mode_compiler/leaf.gen.aid.leaf.json",
  "dir": "/home/user/git/github/towc/aidef/gen_mode_compiler",
  "prompt": "Develop the 'gen mode' compiler. This module processes a `.gen.aid` file. It needs to:\n1. Parse the `.gen.aid` file using the `parser` module.\n2. Interact with an LLM: Inject system prompts explaining how to parse the `.aid` text and provide tools for creating children.\n3. Provide `gen_node` and `gen_leaf` tools to the LLM.\n    - `gen_node(name: string, content: string)`: Creates a child node at `./<node_name>/node.gen.aid`. The `content` is the `.aid` specification for the child.\n    - `gen_leaf(name: string, prompt: string, files: string[], commands: string[] | null)`: Creates a leaf node at `./<leaf_name>/leaf.gen.aid.leaf.json`. The `prompt` contains instructions, `files` lists files to create, and `commands` are shell commands.\n4. Ensure that each node and leaf gets its own dedicated folder.\n5. Implement tree-diffing logic: If a new `.gen.aid` file for a node is practically equivalent to the previous one, avoid recursing further and keep existing children. Otherwise, prune the affected branch (deleting only files listed in leaf `files` arrays).\n6. Enforce `max_retries` from parent/user config.\n7. Ensure AI calls are made at a very low (or 0) temperature for predictability.",
  "files": [
    "genCompiler.ts",
    "nodeGenerator.ts",
    "leafGenerator.ts",
    "treeDiffer.ts"
  ],
  "commands": []
}