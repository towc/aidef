aidef is a high-level programming language that compiles .aid specification files into code via AI.

.aid files use an nginx-like syntax with prose. This file (root.aid) is the specification for aidef itself.

target=typescript/bun;

Top-level module interfaces (how they connect):

```ts
// src/compiler/index.ts exports:
export async function compile(rootFile: string, outputDir: string, apiKey: string): Promise<void>;

// src/runtime/index.ts exports:
export async function run(outputDir: string, apiKey: string): Promise<void>;

// src/index.ts (CLI entry point):
import { compile } from "./compiler";
import { run } from "./runtime";
```

include compiler.aid;
include runtime.aid;

environment {
  GEMINI_API_KEY: Required. Used by compiler and runtime for LLM calls.
}

cli {
  path=src/index.ts;
  
  Entry point for the aidef tool.
  Uses commander for arg parsing.
  
  ```ts
  import { compile } from "./compiler";
  import { run } from "./runtime";
  ```
  
  Commands:
    compile [file] - Calls compile(file || "root.aid", outputDir, apiKey)
                     Default outputDir is /tmp/aidef-<n> where n is next available.
    run            - Requires --output. Calls run(outputDir, apiKey).
    analyse        - Requires --output. Not yet implemented.
    browse         - Requires --output. Not yet implemented.

  Options:
    --output, -o <dir>  Output directory for compilation artifacts.
    --max-parallel <n>  Max parallel LLM calls. Default 10.
    --max-retries <n>   Max retries per LLM call. Default 3.
    --max-depth <n>     Max node depth. Default 5.
}
